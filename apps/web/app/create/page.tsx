'use client';import {useState} from 'react';export default function Create(){const[name,setName]=useState('My Pardna');const[hand,setHand]=useState(1000000);const[currency,setCurrency]=useState('JMD');const[interval,setInterval]=useState(604800);const[startAt,setStartAt]=useState(new Date(Date.now()+120000).toISOString());const[members,setMembers]=useState([{userId:'00000000-0000-0000-0000-000000000001',payoutPosition:0},{userId:'00000000-0000-0000-0000-000000000002',payoutPosition:1}]);const[result,setResult]=useState<any>(null);const api=process.env.NEXT_PUBLIC_API_URL!;const submit=async(e:any)=>{e.preventDefault();const r=await fetch(`${api}/circles`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,handAmountMinor:Number(hand),currency,intervalSeconds:Number(interval),startAtISO:startAt,members})});setResult(await r.json())};return(<main><h2 style={{fontSize:22}}>Create Circle</h2><form onSubmit={submit} style={{display:'grid',gap:10,maxWidth:560}}><label>Name <input value={name} onChange={e=>setName(e.target.value)} /></label><label>Hand (minor units) <input type='number' value={hand} onChange={e=>setHand(Number(e.target.value))} /></label><label>Currency <select value={currency} onChange={e=>setCurrency(e.target.value)}><option>JMD</option><option>USD</option></select></label><label>Interval (sec) <input type='number' value={interval} onChange={e=>setInterval(Number(e.target.value))} /></label><label>Start at (ISO) <input value={startAt} onChange={e=>setStartAt(e.target.value)} /></label><details><summary>Members JSON</summary><textarea rows={6} style={{width:'100%'}} value={JSON.stringify(members,null,2)} onChange={e=>setMembers(JSON.parse(e.target.value))} /></details><button style={{padding:'10px 14px',borderRadius:10,border:'1px solid #ddd'}}>Create</button></form>{result&&<pre style={{background:'#f7f7f7',padding:12,marginTop:12}}>{JSON.stringify(result,null,2)}</pre>}</main>)}
